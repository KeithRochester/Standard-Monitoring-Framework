
# SMF: Windows URL Request
Used to monitor URLs from a Windows watcher. Uses out of the box URL monitoring.

Monitors:

* Certificate Authority Trusted
* Certificate Expired
* Certificate Expires soon
* Certificate Invalid
* Content in response body matches expected value
* DNS Resolution Failure
* Error Code
* URL Reachable
* Response Time
* Status Code

## Adding Monitoring

To add a Windows URL Monitor...

* Create/update **HKLM:\SOFTWARE\SMF\SCOMDiscoveryData\\##Business Service##\\##Environment##\\WindowsURL** on the agent that will perform the monitoring. [Example Registry Key](https://github.com/KeithRochester/Standard-Monitoring-Framework/blob/main/Documentation/Example%20Files/WindowsURL.reg)
* Use the **SMF: Add URL Monitor** task.                 

## Run As Account
If the agents default action account doesn't have the required access to the URL a run as account can be added to the **Standard Monitoring Framework Windows URL Profile** run as profile. If a proxy server is used and requires authentication is required **Standard Monitoring Framework Windows URL Proxy Profile** can be used.

## Windows URL Properties 

|Property|Description|
|-|-|
|AuthenticationScheme|Authentication scheme used to authenticate to the URL (Basic, None, NTLM, Digest, Negotiate)|
|Body|Body of request|
|Content Match|Content to match in response body|
|Error Time|Time threshold for response to generate an error condition|
|HeaderContentType|Header content type e.g. text/xml;charset=utf-8|
|Header1Name|Header1 name e.g. Accept-Language|
|Header1Value|Header1 value e.g. en-US|
|Header2Name|Header2 name e.g. Accept-Charset|
|Header2Value|Header2 value e.g. utf-8|
|Header3Name|Header3 name e.g. From|
|Header3Value|Header3 value e.g. SCOM@SCOM.COM|
|Proxy|Address of proxy server to use for the request (IP address or FQDN)|
|Proxy Authentication Scheme|Authentication scheme used to authenticate to the proxy server(Basic, None, NTLM, Digest, Negotiate)|
|Response Timeout|Timeout in seconds for the request to return a response|
|HTTP Status Threshold|HTTP Status threshold. Response codes higher than the configured value will generate an error condition|
|URL|URL to be monitoring|
|UserAgent|User Agent string to send with the request. (Mozilla/5.0 (compatible; MSIE 9.0; Windows NT; Windows NT 6.1; en-US))|
|Verb|request method GET, POST, PUT, DELETE, CONNECT, etc... |
|Warning Time|Time threshold for response to generate an warning condition|

## General Properties

|Property|Description|
|-|-|
|Business Service|The name of the business service that the monitoring is part of|
|Environment|Which lifecycle environment does the business service belong to. E.g. Production, UAT, DEV, etc...|
|Business Service Team|Team that owns the business service|
|Component Name|Name of the logical group that the object belongs to. Used to group similar objects together. E.g. Backend server objects in a Backend Server Component Group|
|Frequency|Frequency in seconds that the monitoring will run|
|Match Count|The number of consecutive samples that must occur before the monitor is unhealthy|
|Schedule Start Time|Time of day that monitoring will run from e.g. 00:00, 08:00, etc...|
|Schedule End Time|Time of day that monitoring will stop running e.g. 23:59, 17:00, etc...|
|Schedule Days|Bit mask for the days of the week that monitoring should run<br>Sunday = 1<br>  Monday = 2 <br>Tuesday = 4<br>Wednesday = 8<br>Thursday = 16<br>Friday = 32<br>Saturday = 64<br><br>Sunday to Saturday = 127<br>Monday to Friday = 62.|
|Description|Description of the object being monitored. This text is included in the alert body|
|Severity|Severity or alerts and state on dashboards. Critical or Warning|
|Priority|Priority that alerts will be assigned. High, Medium, or Low|
|Documentation|Link to documentation. Will be referenced in alerts|
|Object Team|The name of the team that will be responsible for resolving alerts generated by the monitoring|
